
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../logging/">
      
      
        <link rel="next" href="../network-time-synchronizer/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.49">
    
    
      
        <title>NetworkTime - netfox</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.6f8fc17f.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/mkdocs_puml/puml.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#networktime" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="netfox" class="md-header__button md-logo" aria-label="netfox" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            netfox
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              NetworkTime
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="netfox" class="md-nav__button md-logo" aria-label="netfox" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    netfox
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../upgrading/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Upgrading netfox
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    netfox
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            netfox
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Tutorials
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            Tutorials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/responsive-player-movement/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Responsive player movement
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/configuring-properties-from-code/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuring properties from code
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/rollback-caveats/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Rollback caveats
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/interpolation-caveats/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Interpolation caveats
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Concepts
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Concepts
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/servers-clients-ownership/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Servers, clients, and ownership
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/authoritative-servers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Authoritative servers
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Guides
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            Guides
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../logging/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Logging
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    NetworkTime
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    NetworkTime
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#network-tick-loop" class="md-nav__link">
    <span class="md-ellipsis">
      Network tick loop
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#starting-and-stopping" class="md-nav__link">
    <span class="md-ellipsis">
      Starting and stopping
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pausing" class="md-nav__link">
    <span class="md-ellipsis">
      Pausing
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#time-synchronization" class="md-nav__link">
    <span class="md-ellipsis">
      Time synchronization
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Time synchronization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#synchronized-time" class="md-nav__link">
    <span class="md-ellipsis">
      Synchronized time
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#local-time" class="md-nav__link">
    <span class="md-ellipsis">
      Local time
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#remote-time" class="md-nav__link">
    <span class="md-ellipsis">
      Remote time
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#settings" class="md-nav__link">
    <span class="md-ellipsis">
      Settings
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../network-time-synchronizer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    NetworkTimeSynchronizer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../network-events/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    NetworkEvents
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../interpolators/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Interpolators
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../property-paths/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Property paths
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../network-rollback/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    NetworkRollback
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../network-performance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    NetworkPerformance
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Nodes
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            Nodes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nodes/tick-interpolator/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    TickInterpolator
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nodes/rollback-synchronizer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RollbackSynchronizer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nodes/state-synchronizer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    StateSynchronizer
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    netfox.noray
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            netfox.noray
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Guides
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            Guides
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../netfox.noray/guides/noray/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Noray
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../netfox.noray/guides/packet-handshake/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PacketHandshake
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    netfox.extras
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            netfox.extras
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1" >
        
          
          <label class="md-nav__link" for="__nav_5_1" id="__nav_5_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Guides
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1">
            <span class="md-nav__icon md-icon"></span>
            Guides
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../netfox.extras/guides/base-net-input/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    BaseNetInput
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../netfox.extras/guides/network-weapon/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    NetworkWeapon
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../netfox.extras/guides/rewindable-state-machine/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RewindableStateMachine
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../netfox.extras/guides/window-tiler/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    WindowTiler
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#network-tick-loop" class="md-nav__link">
    <span class="md-ellipsis">
      Network tick loop
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#starting-and-stopping" class="md-nav__link">
    <span class="md-ellipsis">
      Starting and stopping
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pausing" class="md-nav__link">
    <span class="md-ellipsis">
      Pausing
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#time-synchronization" class="md-nav__link">
    <span class="md-ellipsis">
      Time synchronization
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Time synchronization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#synchronized-time" class="md-nav__link">
    <span class="md-ellipsis">
      Synchronized time
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#local-time" class="md-nav__link">
    <span class="md-ellipsis">
      Local time
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#remote-time" class="md-nav__link">
    <span class="md-ellipsis">
      Remote time
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#settings" class="md-nav__link">
    <span class="md-ellipsis">
      Settings
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="networktime">NetworkTime</h1>
<p>Tracks shared network time between players, and provides an event loop for
synchronized game updates. Provided as an autoload.</p>
<p>A separate timer is provided for network ticks, making the network game 
update rate independent from rendering or physics frames.</p>
<h2 id="network-tick-loop">Network tick loop</h2>
<p><em>NetworkTime</em> provides its own independent event loop by exposing signals. This
makes networked game logic independent of current FPS, and makes it run at a
consistent rate. Connect handlers to <em>NetworkTime</em>'s signals to implement
networked game logic.</p>
<p>During each frame, <em>NetworkTime</em> checks how much time has elapsed since the
last tick loop. When more time has elapsed than a single tick's duration, the
<em>network tick loop</em> will run:</p>
<div class='puml-container'><div class="puml light" style="display: block"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="430px" preserveAspectRatio="xMidYMid meet" style="width:191px;height:430px;background:#FFFFFF;" version="1.1" viewBox="0 0 191 430" width="191px" zoomAndPan="magnify" class="diagram"><defs/><g><ellipse cx="94.656" cy="20" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1;"/><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="118.1035" x="35.6042" y="50"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="98.1035" x="45.6042" y="71.1387">before_tick_loop</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="86.4688" x="51.4216" y="159.6792"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="66.4688" x="61.4216" y="180.8179">before_tick</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="62.5332" x="63.3894" y="213.6479"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="42.5332" x="73.3894" y="234.7866">on_tick</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="76.1855" x="56.5632" y="267.6167"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="56.1855" x="66.5632" y="288.7554">after_tick</text><polygon fill="#F1F1F1" points="48,103.9688,141.312,103.9688,153.312,115.9688,141.312,127.9688,48,127.9688,36,115.9688,48,103.9688" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="16.2153" x="98.656" y="138.1792">&gt;0</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="93.312" x="48" y="119.7769">Ticks to simulate</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="6.9985" x="29.0015" y="113.3745">0</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="107.8203" x="40.7458" y="343.5854"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="87.8203" x="50.7458" y="364.7241">after_tick_loop</text><ellipse cx="94.656" cy="408.5542" fill="none" rx="11" ry="11" style="stroke:#222222;stroke-width:1;"/><ellipse cx="94.656" cy="408.5542" fill="#222222" rx="6" ry="6" style="stroke:#222222;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="94.656" x2="94.656" y1="30" y2="50"/><polygon fill="#181818" points="90.656,40,94.656,50,98.656,40,94.656,44" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="94.656" x2="94.656" y1="193.6479" y2="213.6479"/><polygon fill="#181818" points="90.656,203.6479,94.656,213.6479,98.656,203.6479,94.656,207.6479" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="94.656" x2="94.656" y1="247.6167" y2="267.6167"/><polygon fill="#181818" points="90.656,257.6167,94.656,267.6167,98.656,257.6167,94.656,261.6167" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="94.656" x2="94.656" y1="127.9688" y2="159.6792"/><polygon fill="#181818" points="90.656,149.6792,94.656,159.6792,98.656,149.6792,94.656,153.6792" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="94.656" x2="94.656" y1="301.5854" y2="311.5854"/><line style="stroke:#181818;stroke-width:1;" x1="94.656" x2="165.312" y1="311.5854" y2="311.5854"/><polygon fill="#181818" points="161.312,222.23,165.312,212.23,169.312,222.23,165.312,218.23" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="165.312" x2="165.312" y1="115.9688" y2="311.5854"/><line style="stroke:#181818;stroke-width:1;" x1="165.312" x2="153.312" y1="115.9688" y2="115.9688"/><polygon fill="#181818" points="163.312,111.9688,153.312,115.9688,163.312,119.9688,159.312,115.9688" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="36" x2="24" y1="115.9688" y2="115.9688"/><polygon fill="#181818" points="20,208.23,24,218.23,28,208.23,24,212.23" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="24" x2="24" y1="115.9688" y2="323.5854"/><line style="stroke:#181818;stroke-width:1;" x1="24" x2="94.656" y1="323.5854" y2="323.5854"/><line style="stroke:#181818;stroke-width:1;" x1="94.656" x2="94.656" y1="323.5854" y2="343.5854"/><polygon fill="#181818" points="90.656,333.5854,94.656,343.5854,98.656,333.5854,94.656,337.5854" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="94.656" x2="94.656" y1="83.9688" y2="103.9688"/><polygon fill="#181818" points="90.656,93.9688,94.656,103.9688,98.656,93.9688,94.656,97.9688" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="94.656" x2="94.656" y1="377.5542" y2="397.5542"/><polygon fill="#181818" points="90.656,387.5542,94.656,397.5542,98.656,387.5542,94.656,391.5542" style="stroke:#181818;stroke-width:1;"/></g></svg></div></div>

<p>The tick loop will run as long as it catches up on ticks to run. Every loop is
limited to run at most <code>max_ticks_per_frame</code> ticks to avoid overwhelming the
CPU.</p>
<p>To tie the network tick loop to Godot's physics process, enable
<code>sync_to_physics</code>. This will result in the tick loop running a single tick in
every physics update.</p>
<p>To move your game logic to the network tick loop, use the <em>on_tick</em> event:</p>
<div class="highlight"><pre><span></span><code><span class="k">extends</span><span class="w"> </span><span class="n">Node3D</span>

<span class="err">@</span><span class="k">export</span><span class="w"> </span><span class="k">var</span><span class="w"> </span><span class="n">speed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">4.0</span>

<span class="k">func</span><span class="w"> </span><span class="n">_ready</span><span class="p">():</span>
<span class="w">  </span><span class="n">NetworkTime</span><span class="o">.</span><span class="n">on_tick</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">_tick</span><span class="p">)</span>

<span class="k">func</span><span class="w"> </span><span class="n">_tick</span><span class="p">(</span><span class="n">delta</span><span class="p">,</span><span class="w"> </span><span class="n">tick</span><span class="p">):</span>
<span class="w">  </span><span class="c1"># Move forward</span>
<span class="w">  </span><span class="n">position</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">basis</span><span class="o">.</span><span class="n">z</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">delta</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">speed</span>
</code></pre></div>
<blockquote>
<p>By convention, <em>on_tick</em> handlers are named <em>_tick</em>.</p>
</blockquote>
<h2 id="starting-and-stopping">Starting and stopping</h2>
<p>By default, <em>NetworkTime</em> does not run the tick loop at all. This lets you
control when the network tick loop, and thus the game starts and stops.</p>
<p>To start the tick loop, call the <code>NetworkTime.start()</code> coroutine. On servers,
this will start the tick loop and return immediately. On clients, it will first
synchronize the time to the server, start the network tick loop, and only then
return. Use this when starting the game.</p>
<blockquote>
<p>Starting the tick loop before starting multiplayer is not supported.</p>
</blockquote>
<p>To stop the tick loop, call <code>NetworkTime.stop()</code>. This will immediately stop
the tick loop and return. Use this when the player leaves a game.</p>
<p>To get notified when a client successfully syncs their time and starts the tick
loop, use the <code>NetworkTime.after_client_sync(peer_id)</code> signal. This is fired
once per client, and only on the server.</p>
<h2 id="pausing">Pausing</h2>
<p><em>NetworkTime</em> also supports pausing the game, if needed. There's two cases
where pauses are considered.</p>
<p>When running ( and pausing ) the game from the editor, the network tick loop
is automatically paused. As there's currently no API to detect the editor
pausing the game, <em>NetworkTime</em> checks if Godot's <code>_process</code> delta and actual
delta is mismatching, and if so, considers the game paused. In some cases, this
can result in false positives when the game simply hangs for a bit, e.g. when
loading resources.</p>
<p>This pause detection only happens when the game is run from the editor, to
avoid false positives in production builds.</p>
<p>The other supported case is pausing the game from the engine itself. Whenever
<code>SceneTree.paused</code> is set to true, <em>NetworkTime</em> won't run the tick loop.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Pausing the tick loop can cause desynchronization between peers, and could
lead to clients fast-forwarding ticks to catch up, or time recalibrations.
If the game is paused via SceneTree, make sure it is paused and unpaused at
the same time on all peers.</p>
</div>
<h2 id="time-synchronization">Time synchronization</h2>
<p><em>NetworkTime</em> runs a time synchronization loop on clients, in the background.
Synchronizing time makes sure that all players have a shared idea of time and
can exchange timing-related data.</p>
<p>The synchronization itself is handled by <a href="../network-time-synchronizer/">NetworkTimeSynchronizer</a>.</p>
<p><em>NetworkTime</em> provides different kinds of time, each for different use cases.
Each time can be accessed as ticks or seconds. Both advance after every network
tick.</p>
<h3 id="synchronized-time">Synchronized time</h3>
<ul>
<li><code>NetworkTime.time</code></li>
<li><code>NetworkTime.ticks</code></li>
</ul>
<p>Marks the current network game time. This is continuously synchronized, making
sure that these values are as close to eachother on all peers as possible.</p>
<p>Use this whenever a notion of game time is needed.</p>
<h3 id="local-time">Local time</h3>
<p><em>Deprecated since netfox v1.9.0.</em> Use synchronized time instead.</p>
<ul>
<li><code>NetworkTime.local_time</code></li>
<li><code>NetworkTime.local_ticks</code></li>
</ul>
<p>Marks the current time in reference to the local machine. Starts at zero when
the network tick loop starts.</p>
<p>Useful for logic that is tied to the tick loop, but is not synchronized over
the network. A good example is visual effects.</p>
<p>Not suitable for synchronizing data, as the local time is different at each
player.</p>
<h3 id="remote-time">Remote time</h3>
<p><em>Deprecated since netfox v1.9.0.</em> Use synchronized time instead.</p>
<ul>
<li><code>NetworkTime.remote_ticks</code></li>
<li><code>NetwokrTime.remote_time</code></li>
<li><code>NetworkTime.remote_rtt</code></li>
</ul>
<p>Marks the current <em>estimated</em> time of the server. This is a regularly updated
estimate.</p>
<p>Note that on each update, the remote time may jump forwards or even backwards.</p>
<p>The estimate is based on the measured roundtrip time ( <em>remote_rtt</em> ) and the
assumption that the latency is exactly half of that.</p>
<p>Can be used as a base for comparisons ( e.g. latency ), but <em>not recommended</em>
for tying game logic to it.</p>
<p>To get notified when a time synchronization happens and the remote time is
updated, use the <code>NetworkTime.after_sync</code> signal.</p>
<h2 id="settings">Settings</h2>
<p>Settings are found in the Project Settings, under Netfox &gt; Time:</p>
<p><img alt="NetworkTime Settings" src="../../assets/network-time-settings.png" /></p>
<p><em>Tickrate</em> specifies the number of ticks every second in the network tick loop.</p>
<p><em>Max Ticks Per Frame</em> sets the maximum number of frames to simulate per tick loop. Used to avoid freezing the game under load.</p>
<p><em>Recalibrate Threshold</em> is the largest allowed time discrepancy in seconds. If
the difference between the remote clock and reference clock is larger than this
setting, the reference clock will be reset to the remote clock. See
<a href="../network-time-synchronizer/">NetworkTimeSynchronizer</a> for more details.</p>
<p><em>Sync Interval</em> is the resting time in seconds between sampling the remote
clock.</p>
<p><em>Sync Samples</em> is the number of measurements to use for time synchronization.
This includes measuring roundtrip time and estimating clock offsets.</p>
<p><em>Sync Adjust Steps</em> is the number of iterations to use when adjusting the
reference clock. Larger values result in more stable clocks but slower
convergence, while smaller values synchronize more aggressively.</p>
<p><em>Sync Sample Interval</em> <em>deprecated in netfox v1.9.0</em>. Originally used as the
resting time between roundtrip measurements.</p>
<p><em>Sync to Physics</em> ensures that the network tick loop runs in Godot's physics
process when enabled. This can be useful in cases where a lot of physics
operations need to be done as part of the tick- or the rollback loop.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": [], "search": "../../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.88dd0f4e.min.js"></script>
      
        <script src="../../../assets/mkdocs_puml/puml.js"></script>
      
    
  </body>
</html>